function render_umenu(){if(null!=$user.displayName){var e=new TopAccMenu;e.render()}else $(".top-menu>a[data-target=#logout]").attr({"data-target":"#login"}).html("Log In")}function updateCart(e){$(e.target).is(":checked")?$bookingCart.add($(e.target).attr("id")):$bookingCart["delete"]($(e.target).attr("id"));var t=0;$bookingCart.forEach(function(e){var i=e.split("_");t+=parseInt(i[i.length-1])}),$subTotal=t,new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render(),updateLocalStorage($bookingCart)}function updateLocalStorage(e){var t=new Array;e.forEach(function(e){t.push(e)}),localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify(t))}function logoutFromServer(){return $.ajax({type:"GET",url:$ROOT_URL+"/custlogout",dataType:"text",xhrFields:{withCredentials:!0},success:function(e){location.reload()}}).fail(function(){console.log("failed")})}function updateCheckBoxes(){$bookingCart.forEach(function(e){$("#"+e).prop("checked",!0)})}function getAmount(){return $subTotal-$subTotal*$discount/100+100}function getDiscount(){return $discount*$subTotal/100}window.booking={},$subTotal=0,window.booking.amount=0,$promocode1="look40",$promocode2="look30",$discount=0,$minBookinAmount=800,$convenienceCharge=100,$bookingCart=new Set,$data={services:{facial:{category:{basic:[{name:"whitening facial",time:"60 min",cost:"750"},{name:"Anti Tan Facial",time:"60 min",cost:"750"},{name:"Fruit Facial",time:"60 min",cost:"750"},{name:"Aloe Vera Facial",time:"60 min",cost:"750"},{name:"Herbal Facial",time:"60 min",cost:"750"}],standard:[{name:"Silver Sheen Facial",time:"60 min",cost:"1100"},{name:"Gold Radiance Facial",time:"60 min",cost:"1100"},{name:"Skin Lightening Facial",time:"60 min",cost:"1100"},{name:"Tan Removal Facial",time:"60 min",cost:"1100"},{name:"Purifying Facial",time:"60 min",cost:"1100"}],premium:[{name:"Illuminating Facial",time:"60 min",cost:"2000"},{name:"O2 Whitening Facial",time:"60 min",cost:"2000"},{name:"Gold Sheen Facial",time:"60 min",cost:"2000"},{name:"Pearl Glow Facial",time:"60 min",cost:"2000"},{name:"Anti Acne Facial",time:"60 min",cost:"2000"}]}},cleanup:{category:{basic:[{name:"whitening cleanup",time:"30 min",cost:"350"},{name:"Anti Tan cleanup",time:"30 min",cost:"350"},{name:"Fruit cleanup",time:"30 min",cost:"350"},{name:"Aloe Vera cleanup",time:"30 min",cost:"350"},{name:"Herbal cleanup",time:"30 min",cost:"350"}],standard:[{name:"Silver Sheen cleanup",time:"30 min",cost:"550"},{name:"Gold Radiance cleanup",time:"30 min",cost:"550"},{name:"Skin Lightening cleanup",time:"30 min",cost:"550"},{name:"Tan Removal cleanup",time:"30 min",cost:"550"},{name:"Purifying cleanup",time:"30 min",cost:"550"}],premium:[{name:"Illuminating cleanup",time:"30 min",cost:"1000"},{name:"O2 Whitening cleanup",time:"30 min",cost:"1000"},{name:"Gold Sheen cleanup",time:"30 min",cost:"1000"},{name:"Pearl Glow cleanup",time:"30 min",cost:"1000"},{name:"Anti Acne cleanup",time:"30 min",cost:"1000"}]}},threading:{category:{basic:[{name:"Eyebrows",time:"05 min",cost:"25"},{name:"upperlips",time:"05 min",cost:"25"},{name:"forehead",time:"05 min",cost:"25"},{name:"sidelocks",time:"05 min",cost:"25"},{name:"chin",time:"05 min",cost:"25"}]}},bleach:{category:{"basic:fruit or equal":[{name:"face",time:"15 min",cost:"250"},{name:"under arms",time:"15 min",cost:"60"},{name:"full arms",time:"15 min",cost:"250"},{name:"half legs",time:"15 min",cost:"300"},{name:"full legs",time:"20 min",cost:"550"},{name:"back",time:"20 min",cost:"500"},{name:"front",time:"20 min",cost:"500"},{name:"full body",time:"60 min",cost:"1400"}],"standard:oxy or equal":[{name:"face",time:"15 min",cost:"400"},{name:"under arms",time:"15 min",cost:"90"},{name:"full arms",time:"15 min",cost:"400"},{name:"half legs",time:"15 min",cost:"450"},{name:"full legs",time:"20 min",cost:"700"},{name:"back",time:"20 min",cost:"650"},{name:"front",time:"20 min",cost:"650"},{name:"full body",time:"60 min",cost:"2000"}],"premium:gold/de tan or equal":[{name:"face",time:"15 min",cost:"550"},{name:"under arms",time:"15 min",cost:"120"},{name:"full arms",time:"15 min",cost:"550"},{name:"half legs",time:"15 min",cost:"600"},{name:"full legs",time:"20 min",cost:"800"},{name:"back",time:"20 min",cost:"750"},{name:"front",time:"20 min",cost:"750"},{name:"full body",time:"60 min",cost:"2400"}]}},"hair style":{category:{"hair cut":[{name:"trimming",time:"15 min",cost:"350"},{name:"staright",time:"15 min",cost:"350"},{name:"u shape",time:"15 min",cost:"350"},{name:"v shape",time:"15 min",cost:"350"},{name:"steps & razor",time:"20 min",cost:"450"},{name:"any haircut of choice",time:"20 min",cost:"600"}],"Shampoo and Blowdry":[{name:"Shoulder Length",time:"30 min",cost:"300"},{name:"Mid Back Length",time:"45 min",cost:"350"},{name:"Waist Length",time:"45 min",cost:"420"}],curling:[{name:"Shoulder Length",time:"30 min",cost:"500"},{name:"Mid Back Length",time:"40 min",cost:"600"},{name:"Waist Length",time:"45 min",cost:"700"}],Straightening:[{name:"Shoulder Length",time:"30 min",cost:"500"},{name:"Mid Back Length",time:"40 min",cost:"600"},{name:"Waist Length",time:"45 min",cost:"700"}],"Hair Styling":[{name:"Shoulder Length",time:"30 min",cost:"500"},{name:"Mid Back Length",time:"40 min",cost:"600"},{name:"Waist Length",time:"45 min",cost:"700"}],"Head Massage":[{name:"Coconut Oil/Almond Oil",time:"30 min",cost:"180"},{name:"Olive Oil",time:"30 min",cost:"250"},{name:"Essential Oils",time:"30 min",cost:"300"}]}},"hair care":{category:{"Hair Spa (Hot Towel)":[{name:"Shoulder Length",time:"25 min",cost:"850"},{name:"Mid Back Length",time:"35 min",cost:"1100"},{name:"Waist Length",time:"40 min",cost:"1450"}],"Nourishment Hair Spa":[{name:"Shoulder Length",time:"25 min",cost:"1100"},{name:"Mid Back Length",time:"35 min",cost:"1450"},{name:"Waist Length",time:"40 min",cost:"1800"}],"Treatment Hair Spa (Anti-Dandruff/Anti Hairfall/Mythic Oil)":[{name:"Shoulder Length",time:"30 min",cost:"1800"},{name:"Mid Back Length",time:"40 min",cost:"2400"},{name:"Waist Length",time:"45 min",cost:"3000"}],"Henna Application":[{name:"Shoulder Length",time:"30 min",cost:"350"},{name:"Mid Back Length",time:"40 min",cost:"420"},{name:"Waist Length",time:"60 min",cost:"480"}],"Colour Henna Application":[{name:"Shoulder Length",time:"30 min",cost:"550"},{name:"Mid Back Length",time:"40 min",cost:"600"},{name:"Waist Length",time:"60 min",cost:"650"}]}},"hair color":{category:{"Global Color (Grey Coverage) - Matrix or Equal":[{name:"Shoulder Length",time:"60 min",cost:"1800"},{name:"Mid Back Length",time:"90 min",cost:"3000"},{name:"Waist Length",time:"105 min",cost:"4800"}],"Global Color (Grey Coverage) - Majirel or Equal":[{name:"Shoulder Length",time:"60 min",cost:"2400"},{name:"Mid Back Length",time:"90 min",cost:"3600"},{name:"Waist Length",time:"105 min",cost:"6000"}],"Global Color (Grey Coverage) - Inoa or Equal":[{name:"Shoulder Length",time:"60 min",cost:"3000"},{name:"Mid Back Length",time:"90 min",cost:"4200"},{name:"Waist Length",time:"105 min",cost:"6500"}],"Fashion Color - Matrix or Equal":[{name:"Shoulder Length",time:"60 min",cost:"2400"},{name:"Mid Back Length",time:"90 min",cost:"3600"},{name:"Waist Length",time:"105 min",cost:"5400"}],"Fashion Color - Majirel or Equal":[{name:"Shoulder Length",time:"60 min",cost:"3000"},{name:"Mid Back Length",time:"90 min",cost:"4200"},{name:"Waist Length",time:"105 min",cost:"6500"}],"Fashion Color - Inoa or Equal":[{name:"Shoulder Length",time:"60 min",cost:"3500"},{name:"Mid Back Length",time:"90 min",cost:"4800"},{name:"Waist Length",time:"105 min",cost:"7200"}],"Global Fashion Color with Pre-Lightnening - Matrix or Equal":[{name:"Shoulder Length",time:"90 min",cost:"3000"},{name:"Mid Back Length",time:"120 min",cost:"4200"},{name:"Waist Length",time:"150 min",cost:"6000"}],"Global Fashion Color with Pre-Lightnening - Majirel or Equal":[{name:"Shoulder Length",time:"90 min",cost:"3600"},{name:"Mid Back Length",time:"120 min",cost:"4800"},{name:"Waist Length",time:"150 min",cost:"7200"}],"Global Fashion Color with Pre-Lightnening - Inoa or Equal":[{name:"Shoulder Length",time:"90 min",cost:"4200"},{name:"Mid Back Length",time:"120 min",cost:"5400"},{name:"Waist Length",time:"150 min",cost:"7800"}],"Streaks - Matrix or Equal":[{name:"Shoulder Length",time:"60 min for 2 Streaks",cost:"250"},{name:"Mid Back Length",time:"60 min for 2 Streaks",cost:"300"},{name:"Waist Length",time:"60 min for 2 Streaks",cost:"375"}],"Streaks - Majirel or Equal":[{name:"Shoulder Length",time:"60 min for 2 Streaks",cost:"300"},{name:"Mid Back Length",time:"60 min for 2 Streaks",cost:"375"},{name:"Waist Length",time:"60 min for 2 Streaks",cost:"450"}],"Streaks - Inoa or Equal":[{name:"Shoulder Length",time:"60 min for 2 Streaks",cost:"375"},{name:"Mid Back Length",time:"60 min for 2 Streaks",cost:"450"},{name:"Waist Length",time:"60 min for 2 Streaks",cost:"500"}],"Root Touch-Ups":[{name:"Matrix or Equal",time:"60 min",cost:"720"},{name:"Majirel or Equal",time:"60 min",cost:"850"},{name:"Inoa or Equal",time:"60 min",cost:"1000"},{name:"Schwarzkopf or Equal",time:"60 min",cost:"1000"}]}},waxing:{category:{"Basic:Normal Wax":[{name:"upper lips",time:"05 min",cost:"50"},{name:"chin",time:"05 min",cost:"60"},{name:"side locks",time:"10 min",cost:"70"},{name:"under arms",time:"10 min",cost:"60"},{name:"full arms",time:"15 min",cost:"240"},{name:"half legs",time:"15 min",cost:"240"},{name:"full legs",time:"20 min",cost:"360"},{name:"half back",time:"10 min",cost:"240"},{name:"full back",time:"10 min",cost:"350"},{name:"half front",time:"10 min",cost:"240"},{name:"full front",time:"15 min",cost:"360"},{name:"Bikini Wax",time:"45 min",cost:"850"},{name:"full body wax",time:"60 min",cost:"1800"}],"Standard:Gold/Chocolate Wax":[{name:"upper lips",time:"05 min",cost:"60"},{name:"chin",time:"05 min",cost:"70"},{name:"side locks",time:"10 min",cost:"150"},{name:"under arms",time:"10 min",cost:"85"},{name:"full arms",time:"15 min",cost:"360"},{name:"half legs",time:"15 min",cost:"360"},{name:"full legs",time:"20 min",cost:"420"},{name:"half back",time:"10 min",cost:"360"},{name:"full back",time:"10 min",cost:"550"},{name:"half front",time:"10 min",cost:"360"},{name:"full front",time:"15 min",cost:"540"},{name:"Bikini Wax",time:"45 min",cost:"950"},{name:"full body wax",time:"60 min",cost:"2200"}],"Premium:Rica Wax/De Tan/Brazilian Wax":[{name:"upper lips",time:"05 min",cost:"70"},{name:"chin",time:"05 min",cost:"85"},{name:"side locks",time:"10 min",cost:"200"},{name:"under arms",time:"10 min",cost:"120"},{name:"full arms",time:"15 min",cost:"480"},{name:"half legs",time:"15 min",cost:"480"},{name:"full legs",time:"20 min",cost:"600"},{name:"half back",time:"10 min",cost:"550"},{name:"full back",time:"10 min",cost:"960"},{name:"half front",time:"10 min",cost:"480"},{name:"full front",time:"15 min",cost:"960"},{name:"Bikini Wax",time:"45 min",cost:"1300"},{name:"full body wax",time:"60 min",cost:"3000"}]}},"body pampering":{category:{"Back & Shoulder massage":[{name:"Fruit Cream/Oil",time:"15 min",cost:"350"},{name:"Spa Oils + Pack",time:"20 min",cost:"480"},{name:"Spa Oils + Scrubbing + Pack",time:"20 min",cost:"600"}],"Foot Massage":[{name:"Fruit Cream/Oil",time:"20 min",cost:"300"},{name:"Spa Oils + Pack",time:"20 min",cost:"420"},{name:"Spa Oils + Scrubbing + Pack",time:"20 min",cost:"550"}],"Full Body Massage/Polishing":[{name:"Fruit Cream/Oil",time:"90 min",cost:"1000"},{name:"Spa Oils + Pack",time:"90 min",cost:"1500"},{name:"Spa Oils + Scrubbing + Pack",time:"90 min",cost:"2000"}]}},"make up":{category:{"Light party make-up":[{name:"Basic: Hairdo, Draping and Lakem/Lotus Makeup or Equal",time:"30 min",cost:"1199"},{name:"Standard: Hairdo, Draping and Kryolan Makeup or Equal",time:"45 min",cost:"1559"},{name:"Premium: Hairdo, Draping and MAC Makeup or Equal",time:"60 min",cost:"1799"}],"Night Party makeup":[{name:"Basic: Hairdo, Draping and Lakem/Lotus Makeup or Equal",time:"30 min",cost:"1599"},{name:"Standard: Hairdo, Draping and Kryolan Makeup or Equal",time:"45 min",cost:"2199"},{name:"Premium: Hairdo, Draping and MAC Makeup or Equal",time:"60 min",cost:"2499"}]}}}},$(document).ready(function(){if(null!=localStorage.getItem("cart")){var e=JSON.parse(localStorage.getItem("cart"));$.each(e,function(e,t){$bookingCart.add(t)});var t=0;$bookingCart.forEach(function(e){var i=e.split("_");t+=parseInt(i[i.length-1])}),$subTotal=t,$discount=localStorage.getItem("discount"),new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render(),updateCheckBoxes()}});var HeaderNoSearchBar=Backbone.View.extend({el:".page-header",render:function(){var e=_.template($("#header-no-search-bar").html()),t=e();this.$el.html(t).trigger("create"),$(".page-header").removeClass("gray-bg"),render_umenu()}}),TopAccMenu=Backbone.View.extend({el:".top-menu>a:last",events:{"click #logout0":"logout"},show_menu:function(){$(".top-menu>a:last>ul").toggleClass("hidden")},hide_menu:function(){$(".top-menu>a:last>ul").toggleClass("hidden")},logout:function(e){$user.displayName=null,"facebook"==$user.platform?FB.logout(function(){logoutFromServer().success(function(){clearUser(),render_umenu()})}):$.ajax({type:"GET",url:"https://accounts.google.com/o/oauth2/revoke?token="+gapi.auth.getToken().access_token,async:!1,contentType:"application/json",dataType:"jsonp",success:function(e){logoutFromServer().success(function(){clearUser(),render_umenu()})},error:function(e){console.log(e)}}),e.stopPropagation()},render:function(){var e=_.template($("#p_img").html()),t=e({i:$user.image,j:$user.displayName});this.$el.html(t).trigger("create"),$(".top-menu>a:last").attr("data-target","#logout")}}),FacialListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#facial-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),CleanUpListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#cleanUp-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),ThreadingListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#threading-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),BleachListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#bleach-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),HairStyleListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#hairStyle-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),HairCareListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#hairCare-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),HairColorListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#hairColor-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),WaxingListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#waxing-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),BodyPamperingListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#bodyPampering-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),MakeUpListView=Backbone.View.extend({el:".servicelist",events:{'click [type="checkbox"]':"checkBoxClicked"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#makeup-list").html()),t=e({data:this.options.data});this.$el.html(t).trigger("create")},checkBoxClicked:function(e){updateCart(e)}}),BookingModal=Backbone.View.extend({el:"#otp .modal-content",events:{"click #nextbook":"next","change input":"changedata","change #city":"changecity","click #backbook":"back","focus #dd":"showdates","click #datelist a.list-group-item":"clickedondate","focus #tt":"showtime","click #time a.list-group-item":"clickontime","keyup .cm1":"otpadd"},initialize:function(e){this.options=e,1==window.bs&&(this.dates=this.generateDates())},render:function(){var e=_.template($("#booking_modal_template").html());this.$el.html(e({stat:window.bs||0,data:this.options,dates:this.dates||[]})).trigger("create")},otpadd:function(e){e.stopImmediatePropagation();var t=$(e.currentTarget);Number.isInteger(parseInt(t.val()))?t.next().focus():t.val("")},clickontime:function(e){e.stopImmediatePropagation();var t=$(e.currentTarget);window.booking.time=t.attr("value"),$("#time").slideUp(),$("#tt").val(window.booking.time)},clickedondate:function(e){e.stopImmediatePropagation();var t=$(e.currentTarget);window.booking.date=t.attr("value"),$("#dd").val(window.booking.date),$("#datelist").slideUp()},showdates:function(){$("#datelist").slideDown()},showtime:function(){$("#time").slideDown()},next:function(e){e.stopImmediatePropagation(),this.isValid()?(window.bs++,3==window.bs?(window.booking.datetime=window.booking.date+"__"+window.booking.time,window.booking.address=window.booking.city+"__"+window.booking.locality+"__"+window.booking.hofno+"__"+window.booking.landmark,console.log(window.booking),$.ajax({url:$ROOT_URL+"/sendBookingOtp",type:"POST",cache:!1,data:window.booking,xhrFields:{withCredentials:!0},success:function(e){window.booking.lkey=e,new BookingModal(window.booking).render()},error:function(e){window.bs--,new BookingModal(window.booking).render(),alert("Error sending OTP. Please check your internet connection!")}})):4==window.bs?$.ajax({url:$ROOT_URL+"/sendbookingacknew",type:"POST",cache:!1,data:window.booking,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){"OTPVERIFIED"==e.status?(window.booking.service=Array.from($bookingCart),new BookingModal(window.booking).render(),$("#subtotal").text($subTotal),$("#totalamount").text(window.booking.amount),$("#discount").text($subTotal*$discount/100)):(window.bs--,new BookingModal(window.booking).render(),alert("Wrong OTP. Please try again with correct OTP!")),$bookingCart.clear(),new CartListView({cart:$bookingCart,coupon:!1}).render(),$(":checkbox").prop("checked",!1),localStorage.clear()},error:function(e){window.bs--,new BookingModal(window.booking).render(),alert("Wrong OTP. Please try again with correct OTP!")}}):new BookingModal(window.booking).render()):alert("Please input all the fields!")},back:function(e){e.stopImmediatePropagation(),window.bs>0&&window.bs--,new BookingModal(window.booking).render()},changedata:function(e){"add"==$(e.currentTarget).attr("id")?window.booking.locality=$(e.currentTarget).val():"hofno"==$(e.currentTarget).attr("id")?window.booking.hofno=$(e.currentTarget).val():"landmark"==$(e.currentTarget).attr("id")?window.booking.landmark=$(e.currentTarget).val():"mn"==$(e.currentTarget).attr("id")&&(window.booking.mobile=$(e.currentTarget).val()),window.booking.couponcode="LOOK40"},changecity:function(){window.booking.city=$("#city").val()},isValid:function(){if(window.bs||(window.bs=0),0==window.bs){if(!(window.booking.city&&window.booking.locality&&window.booking.landmark&&window.booking.hofno))return!1}else if(1==window.bs){if(!window.booking.date||!window.booking.time)return!1}else if(2==window.bs){if(!window.booking.mobile||10!=window.booking.mobile.length)return!1}else if(3==window.bs){for(var e=$(".cm1"),t="",i=0;i<e.length;i++)t+=e.eq(i).val();if(6!=t.length)return!1;window.booking.otp=t}return!0},generateDates:function(){var e=[],t=new Date,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=[31,28,31,30,31,30,31,31,30,31,30,31];t.getFullYear()%4==0&&(a[1]=29);for(var o=[t.getDate()],m=t.getDay(),c=n[t.getMonth()],r=t.getMonth(),s=["Today -  "+this.ordinal_suffix_of(o[0])+" "+c],l=t.getFullYear(),d=[parseInt(r)+1+"/"+o[0]+"/"+l],u=1;14>u;u++)o[u-1]+1>a[r]?(o[u]=1,r+=1,r>11?(c=n[0],r=0,l+=1):c=n[r]):o[u]=o[u-1]+1,m>5&&(m=-1),m++,s[u]=(1==u?"Tomorrow":i[m])+" - "+this.ordinal_suffix_of(o[u])+" "+c,d[u]=parseInt(r)+1+"/"+o[u]+"/"+l;for(var g="",u=0;u<s.length-7;u++)g+="<a class='list-group-item'  value='"+d[u]+"'>"+s[u]+"</a>";e[0]=g,g="";for(var u=7;u<s.length;u++)g+="<a class='list-group-item'  value='"+d[u]+"'>"+s[u]+"</a>";return e[1]=g,$(".bookcontents").eq(0).addClass("showing"),e},ordinal_suffix_of:function(e){var t=e%10,i=e%100;return 1==t&&11!=i?e+"st":2==t&&12!=i?e+"nd":3==t&&13!=i?e+"rd":e+"th"}}),CartListView=Backbone.View.extend({el:".cart-holder",events:{"click .fa-times":"remove","click #reqtobook":"booking","click #promocode":"havepromocode","click .apply":"applypromocode","click #revert":"revertcode"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#cart-list").html()),t=e({cart:this.options.cart,discount:this.options.coupon,amount:this.options.amount});this.$el.html(t).trigger("create")},havepromocode:function(e){$("#promocode2").removeClass("hidden")},applypromocode:function(e){e.stopImmediatePropagation();var t=$("#promoinput").val().toString().toLowerCase();t==$promocode1?($discount=40,new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render(),localStorage.setItem("discount",$discount)):t==$promocode2?($discount=30,new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render(),localStorage.setItem("discount",$discount)):$("#prmoInvalid").removeClass("hidden")},revertcode:function(){$discount=0,new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render(),localStorage.setItem("discount",0)},remove:function(e){e.stopImmediatePropagation(),updateCart(e),$("#"+e.target.id).prop("checked",!1),new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render()},booking:function(){$subTotal>=$minBookinAmount?(window.booking.amount=getAmount(),window.booking.services=JSON.stringify(Array.from($bookingCart)),null==$user.displayName||""==$user.displayName||void 0==$user.displayName?$("#login").modal("show"):($("#otp").modal("show"),new BookingModal({}).render())):$(".alert").removeClass("hidden").alert()}}),HomeView=Backbone.View.extend({el:".main-container-top",events:{"click .f-menu":"filter","click #clearcart":"clearcart"},initialize:function(e){this.options=e},render:function(){var e=_.template($("#searchtemplate").html()),t=e();this.$el.html(t).trigger("create")},clearcart:function(e){e.stopImmediatePropagation(),$(":checkbox").prop("checked",!1),$bookingCart.clear(),new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render(),localStorage.removeItem("cart")},filter:function(e){var t=$(e.currentTarget).val();switch($(".servicelist").empty(),parseInt(t)){case 1:new FacialListView($data).render();break;case 2:new CleanUpListView($data).render();break;case 3:new ThreadingListView($data).render();break;case 4:new BleachListView($data).render();break;case 5:new HairStyleListView($data).render();break;case 6:new HairCareListView($data).render();break;case 7:new HairColorListView($data).render();break;case 8:new WaxingListView($data).render();break;case 9:new BodyPamperingListView($data).render();break;case 10:new MakeUpListView($data).render();break;default:new FacialListView($data).render()}updateCheckBoxes()}}),Workspace=Backbone.Router.extend({initialize:function(){Backbone.history.start()},routes:{"":"home"},home:function(){(new HeaderNoSearchBar).render(),new HomeView($data).render(),new FacialListView($data).render(),new CartListView({cart:$bookingCart,discount:getDiscount(),amount:getAmount()}).render()}}),router=new Workspace;$(document).ready(function(){$("#otp").on("hidden.bs.modal",function(){window.bs=0,window.booking={}})});